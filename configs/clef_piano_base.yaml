# clef-piano-base Training Configuration
#
# Fair comparison with Zeng et al. (2024)
# - Uses Zeng's vocabulary (extended with grace notes)
# - Same data augmentation strategy
# - Same random seeds for reproducibility

# =============================================================================
# Seeds (matching Zeng et al.)
# =============================================================================
seed:
  data_augmentation: 0    # Used during data preprocessing/augmentation
  training: 1234          # Used during model training

# =============================================================================
# Model Architecture
# =============================================================================
model:
  name: "clef-piano-base"
  encoder:
    type: "swin"
    # Swin encoder params TBD
  decoder:
    type: "transformer"
    # Transformer decoder params TBD

# =============================================================================
# Data
# =============================================================================
data:
  # Datasets
  datasets:
    - musesyn
    - humsyn

  # Vocabulary: Zeng's LabelsMultiple + grace notes
  vocabulary: "zeng_extended"

  # Audio features
  audio:
    sample_rate: 16000
    feature: "log_mel"  # Different from Zeng's VQT, but fair comparison
    n_mels: 128
    hop_length: 256

  # Augmentation (matching Zeng)
  augmentation:
    transpose:
      enabled: true
      # Per-song (not per-chunk like Zeng, due to full-song architecture)
    soundfonts:
      - "TimGM6mb.sf2"
      - "FluidR3_GM.sf2"
      - "UprightPianoKW-20220221.sf2"
      - "SalamanderGrandPiano-V3+20200602.sf2"
    loudness_norm:
      target_lufs: -15

# =============================================================================
# Training
# =============================================================================
training:
  batch_size: 8
  learning_rate: 1.0e-4
  max_epochs: 100
  # More params TBD

# =============================================================================
# Paths
# =============================================================================
paths:
  data_dir: "data/datasets"
  output_dir: "data/experiments/clef_piano_base"
  checkpoint_dir: "checkpoints/clef_piano_base"
